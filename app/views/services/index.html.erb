<table id="services_table" class="table table-striped table-bordered table-hover">
  <thead>
    <tr>
      <th class="control"></th>
      <th class="all">Name</th>
      <th class="min-phone-l text-center">Website</th>
      <th class="min-tablet col-md-2 col-sm-3">Category</th>
      <th class="desktop col-md-5">Notes</th>
      <th class="none" >Phone</th>
      <th class="none">Address</th>
      <th class="none">Contact</th>
      <th class="none">Referral</th>
      <th class="none">Eligibility</th>
      <th class="none">Insurance</th>
      <th class="none">Updated</th>
    </tr>
  </thead>

  <tbody>
    <% @services.each do |service| %>
      <tr>
        <td class="control"></td>
        <td class="all"><%= service.name %></td>
        <td class="min-phone-l text-center">
          <%= !service.website || service.website == '' ? '' : 
            link_to('link', service.website, class: 'btn btn-default', target: :_blank) %>
        </td>
        <td class="min-tablet col-md-2 col-sm-3"><%= service.category %></td>
        <td class="desktop col-md-5"><%= truncate_text(service.notes) %></td>
        <td class="none"><%= service.phone %></td>
        <td class="none"><%= service.address %></td>
        <td class="none"><%= service.contact %></td>
        <td class="none"><%= service.referral %></td>
        <td class="none"><%= service.eligibility %></td>
        <td class="none"><%= service.insurance %></td>
        <td class="none"><%= service.updated_at %></td>
<!--         <td><%= link_to 'Show', service %></td>
        <td><%= link_to 'Edit', edit_service_path(service) %></td>
        <td><%= link_to 'Destroy', service, method: :delete, data: { confirm: 'Are you sure?' } %></td> -->
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<script>

  $(function(){

    var table = $('#services_table').dataTable({
      "autoWidth": false,
      // "heightMatch": "none",
      // ****** for debugging.  change to True before deploy ************
      stateSave: true,
      // "columnDefs": [{ "visible": false, "targets": [4,5,6,7,8,9,10] }],
      "order": [1, 'asc'],
      paging: false,
      responsive: {
        details: {
          type: 'column'
        }
      }
    });

    // table.columnFilter({
    //   aoColumns: [
    //     {type: 'text'},
    //     {type: 'select'},
    //     {type: 'select', values: ['link', '']},
    //     {type: 'text'},
    //     null, null, null, null, null, null, null
    //   ]
    // });
  });
  // $('window').resize(function(){
  //   var table = $('#resourceTable').dataTable({
  //     "autoWidth": true,
  //     "columnDefs": [{ "visible": false, "targets": [2,3,5,6,7,8,9] }]
  //   });
  // });
</script>

<%= link_to 'New Service', new_service_path %>
